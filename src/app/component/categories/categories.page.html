<ion-content>
  <div class="categories">
    <div class="show-more" [class.active]="showMore">
      <ion-grid class="less-desc">
        <ion-row>
          @for (category of categories; track category.id) {
            <ion-col size="3">
              <div class="card" (click)="showMoreDesc($event)">
                <div class="image">
                  <img [src]="category.img.src" [alt]="category.img.alt">
                </div>
                <h2>{{category.name}}</h2>
              </div>
            </ion-col>
          }
        </ion-row>
      </ion-grid>
      <div class="more-desc">
        <div class="mic" ngbTooltip="Tooltip on top" #tleft="ngbTooltip" triggers="manual"><img src="/assets/imgs/FAB.svg">
        </div>
        <div class="flex">
          <h3>108 Products</h3>
          <div id="open-filter" class="sort"><ion-icon src="/assets/imgs/Filter Sort.svg"></ion-icon></div>
        </div>
        <!-- <div class="filterTab">
          <button class="tab btn" id="open-filter"><ion-icon src="/assets/imgs/Filter Sort.svg"></ion-icon></button>
          <button class="tab btn" (click)="filterTab($event)">All</button>
          <button class="tab btn" (click)="filterTab($event)">Newest</button>
          <button class="tab btn" (click)="filterTab($event)">Popular</button>
          <button class="tab btn" (click)="filterTab($event)">Relevance</button>
          <button class="tab btn" (click)="filterTab($event)"><p>Price: Low to high</p></button>
          <button class="tab btn" (click)="filterTab($event)"><p>Price: High to Low</p></button>
        </div> -->
        <div class="items">
          <ion-grid>
            <ion-row>
              @for (order of order_again; track order.id) {
                <ion-col size="6">
                  <ion-card>
                    <div class="image-col">
                      <ion-grid class="offers">
                        <ion-row>
                          <ion-col size="7" class="text-left">
                            @if(order.offer){
                              <h6>{{order.offer}}</h6>
                            }
                          </ion-col>
                          <ion-col size="5" class="text-right">
                            <button ion-button icon-left clear small (click)="toggleLiked(order)">
                              <ion-icon [src]="order.icon"></ion-icon>
                            </button>
                          </ion-col>
                        </ion-row>
                      </ion-grid>
                      <div class="image">
                        <ion-img [src]="order.img.src" [alt]="order.img.alt"></ion-img>
                      </div>
                    </div>
                    <div class="content">
                      <h1>{{order.brand_name}}</h1>
                      <h2>{{order.product_name}}</h2>
                      <h3>{{order.unit_cross_quantity}}</h3>
                      <h2>{{order.rate}}</h2>
                      <div class="btn" (click)="openModal()">View</div>
                    </div>
                  </ion-card>
                </ion-col>
              }
            </ion-row>
          </ion-grid>
        </div>
      </div>
    </div>
  </div>
</ion-content>

<!-- View cart -->
<ion-modal #model cssClass="inline_modal" (ionModalDidDismiss)="reset($event)" [breakpoints]="[0.1, 0.5, 0.9]" [initialBreakpoint]="0.7">
  <ng-template>
    <!-- <app-add-to-cart-bottom-sheet></app-add-to-cart-bottom-sheet> -->
    <div class="ion-no-border">
      <ion-grid class="main-card">
        <ion-row>
          <ion-col style="width: 50%;">
            <div class="image-col">
              <ion-grid class="offers">
                <ion-row>
                  <ion-col size="7">
                    @if(order_details.offer){
                      <h6>{{order_details.offer}}</h6>
                    }
                  </ion-col>
                  <ion-col size="5" class="text-right">
                    <button ion-button icon-left clear small (click)="toggleLiked(order_details)">
                      <ion-icon [src]="order_details.icon"></ion-icon>
                    </button>
                  </ion-col>
                </ion-row>
              </ion-grid>
              <swiper-container [modules]="swiperModules" [slidesPerView]="1" [keyboard]="true" [centerSlides]="true" [pagination]="{ clickable: true }">
                @for ( image of product_images; track image.id ){
                  <swiper-slide>
                    <div class="image">
                      <ion-img [src]="image.img.src" [alt]="image.img.alt"></ion-img>
                    </div>
                  </swiper-slide>
                }
              </swiper-container>
            </div>
          </ion-col>
          <ion-col style="width: 50%;">
            <div class="content">
              <h1>Fortune</h1>
              <h2>Refined Sunflower Oil</h2>
              <h3>20 ut x 500 ml</h3>
              <h4>₹ 126.00 ~ 200.00 <span>MRP: <span>₹ 260.00</span></span></h4>
              <ion-grid>
                <ion-row>
                  <ion-col size="auto">
                    <h1>UOM </h1>
                  </ion-col>
                  <ion-col size="auto">
                    <select>
                      <option>Each</option>
                    </select>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
      <div class="discount">
        <h6>Get more at discounted price</h6>
        <div class="show-more">
          <div class="less-desc">
            <ion-accordion-group>
              <ion-accordion value="first">
                <ion-item slot="header" color="light">
                  <h2><img src="/assets/imgs/Offer.svg"> Get 35% Off on all flours</h2>
                </ion-item>
                <div class="ion-padding" slot="content">
                  <h3>Description of the scheme that is very long which can span for one or two lines</h3>
                  <p>Validity</p>
                  <p>01/01/2024 to 30/02/2024</p>
                  <hr>
                  <div class="btn">View All Products</div>
                </div>
              </ion-accordion>
            </ion-accordion-group>
          </div>
          @if (price_details.length > 0){
            <div class="more-desc">
              @for (price of price_details; track price.id) {
                <div class="card">
                  <h4>₹ {{price.price}}</h4>
                  <h5>Qty: {{price.qty}}</h5>
                </div>
              }
            </div>
          }
        </div>
      </div>
      <ion-grid>
        <ion-row>
          <ion-col size="auto">
            <ion-grid>
              <ion-row class="count">
                <ion-col size="auto">
                  <div class="minus btn" (click)="decrease()">-</div>
                </ion-col>
                <ion-col size="auto">
                  <p>40</p>
                </ion-col>
                <ion-col size="auto">
                  <div class="plus btn" (click)="increase()">+</div>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-col>
          <ion-col class="text-right">
           <h3>Sub total</h3>
           <h6>₹ 8000.00</h6>
          </ion-col>
        </ion-row>
      </ion-grid>
      <div class="btn2" id="open-toast" expand="block" (click)="add()">Add to Cart</div>
      <ion-toast id="success-message" trigger="open-toast" message="Product added to Cart" [duration]="3000" class="custom-toast" icon="/assets/imgs/check filled.svg"></ion-toast>
    </div>
  </ng-template>
</ion-modal>

<!-- Filter -->
<ion-modal #add_to_cart_modal trigger="open-filter">
<ng-template>
  <div class="flex">
    <h2>Filters</h2>
    <div class="close" (click)="add_to_cart_modal.dismiss()"><img src="/assets/imgs/Close.svg"></div>
  </div>
  <div class="tabs">
    <div class="tab">
        <input type="radio" id="tab-1" name="tab-group-1" checked>
        <label for="tab-1">Tab One</label>
        <div class="tec">
          <div class="model">
            <div class="content">
              <h3>Offers</h3>
              <div class="offers">
                <button class="btn">Buy 1 get 1</button>
                <button class="btn">50% off</button>
                <button class="btn">25% off</button>
                <button class="btn">15% off</button>
                <button class="btn">10% off</button>
                <button class="btn">5% off</button>
              </div>
              <h3>Price</h3>
              <div class="range-values">
                <ion-range aria-label="Dual Knobs Range, Range with ticks" [dualKnobs]="true" [value]="{ lower: 0, upper: 50 }"></ion-range>
                <ul>
                  <li>0</li>
                  <li>10000</li>
                  <li>20000</li>
                  <li>30000</li>
                  <li>40000</li>
                  <li>99999+</li>
                </ul>
              </div>
              <h3>Brands</h3>
              <div class="offers">
                <button class="btn">Fortune</button>
                <button class="btn">ITC</button>
                <button class="btn">Amul</button>
                <button class="btn">Saffola</button>
                <button class="btn">Cadbury</button>
                <button class="btn">ABC</button>
              </div>
            </div>
            <div class="action">
              <div class="flex">
                <div class="btn secondary">Reset</div>
                <div class="btn primary">Apply </div>
              </div>
            </div>
          </div>
        </div> 
    </div>
    <div class="tab">
        <input type="radio" id="tab-2" name="tab-group-1">
        <label for="tab-2">Tab Two</label>
        <div class="tec">
            stuff2
        </div> 
    </div>
 </div>
</ng-template>
</ion-modal>